# NIGIL Status Bot

Discord-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤—É –ù–∏–≥–∏–ª–æ–≤ –≤–µ—Å—Ç–∏ "–∂–∏–≤–æ–π" —Å—Ç–∞—Ç—É—Å-–ø–æ—Å—Ç, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫—É–ª–¥–∞—É–Ω—ã —Å–∏—Å—Ç–µ–º –∏ –ª–∏–º–∏—Ç—ã –Ω–∞ –≤—ã–∑–æ–≤—ã. –°–∫—Ä–∏–ø—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç slash-–∫–æ–º–∞–Ω–¥—ã, –∫–Ω–æ–ø–∫—É —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –≤–µ–¥—ë—Ç –µ–¥–∏–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–∏—Å—Ç–µ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏—Ö;
- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–¥–µ–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã –∏ –∫—É–ª–¥–∞—É–Ω—ã –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏;
- —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤—ã –∫–∞–∫ —á–µ—Ä–µ–∑ slash-–∫–æ–º–∞–Ω–¥—ã (`/call`, `/undo`), —Ç–∞–∫ –∏ —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∫–∞–Ω–∞–ª–µ;
- –ø—É–±–ª–∏–∫—É–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–π "–∂–∏–≤–æ–π" –ø–æ—Å—Ç —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏;
- –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–¥–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–µ–∫—É—â–µ–π –∏ –ø—Ä–æ—à–ª–æ–π –Ω–µ–¥–µ–ª–µ (–∫–Ω–æ–ø–∫–∞ ¬´üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª);
- —É–º–µ–µ—Ç –º—è–≥–∫–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–ø–µ—á–∞—Ç–∫–∏ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö —Å–∏—Å—Ç–µ–º;
- —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ `install.sh` –∏ —Ä–µ–∂–∏–º —Å–∞–º–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ GitHub (`--self-update`).

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –Ω–∞ CPython);
- –¥–æ—Å—Ç—É–ø –∫ Discord API —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º Privileged Gateway Intent `MESSAGE CONTENT`;
- –ø–∞–∫–µ—Ç–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`:
  - `discord.py`
  - `aiosqlite`
  - `apscheduler`
  - `python-dateutil`

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –∞—Ä—Ö–∏–≤ —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏.
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
3. –ó–∞–¥–∞–π—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. —Ä–∞–∑–¥–µ–ª –Ω–∏–∂–µ) –ª–∏–±–æ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å `install.sh`, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   python NIGIL_status.py
   ```
   –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–∏—Ç–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ `install.sh`

–°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ –∑–∞–¥–∞—ë—Ç —Ç–æ–∫–µ–Ω, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–¥ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ systemd (–ø–æ –∂–µ–ª–∞–Ω–∏—é). –ï–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∫ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞, —Ç–∞–∫ –∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–π –º–∞—à–∏–Ω–µ:
```bash
bash install.sh
```
–°–ª–µ–¥—É–π—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. –í—Å–µ –æ—Ç–≤–µ—Ç—ã –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `.env` –∏ unit-—Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∫–∞–∑–∞–Ω–æ –≤ —Å–∫–æ–±–∫–∞—Ö):

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- |
| `NIGIL_TOKEN` | Discord-—Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (**–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**).
| `NIGIL_CHANNEL_ID` (1375890545364172981) | ID —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –¥–ª—è –∂–∏–≤–æ–≥–æ –ø–æ—Å—Ç–∞ –∏ –≤–≤–æ–¥–∞ —Å–∏—Å—Ç–µ–º.
| `NIGIL_DB_PATH` (`./nigil_monitor.sqlite3`) | –ü—É—Ç—å –∫ SQLite-–±–∞–∑–µ. –°–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
| `NIGIL_WEEKLY_LIMIT` (3) | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ –Ω–∞ —Å–∏—Å—Ç–µ–º—É –∑–∞ –Ω–µ–¥–µ–ª—é.
| `NIGIL_COOLDOWN_HOURS` (20) | –ö—É–ª–¥–∞—É–Ω –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ —á–∞—Å–∞—Ö.
| `NIGIL_NOTIFY_PERIOD_MIN` (60) | –ü–µ—Ä–∏–æ–¥ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ —Å–∏—Å—Ç–µ–º–∞—Ö –Ω–∞ –∫—É–ª–¥–∞—É–Ω–µ.
| `NIGIL_AUTO_CLEAN_SECONDS` (10) | –ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –æ—á–∏—â–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª–µ.
| `NIGIL_FUZZY_CUTOFF` (0.72) | –ü–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—á–∞—Ç–æ–∫.
| `NIGIL_SYSTEM_NAME_REGEX` (`^[A-Za-z0-9\-]{2,12}$`) | –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –≤–∞–ª–∏–¥–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π —Å–∏—Å—Ç–µ–º.
| `NIGIL_TIMEZONE` (`Europe/Moscow`) | –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π.
| `NIGIL_PIN_STATUS_MESSAGE` (True) | –ó–∞–∫—Ä–µ–ø–ª—è—Ç—å –ª–∏ –∂–∏–≤–æ–π –ø–æ—Å—Ç.
| `NIGIL_LIVE_POST_ONLY` (True) | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –≤ –ø–æ—Å—Ç–µ —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å (–±–µ–∑ "–∏—Å—Ç–æ—Ä–∏–∏").
| `NIGIL_COMMAND_REPLY_TTL` (0) | –ï—Å–ª–∏ >0 ‚Äî slash-–æ—Ç–≤–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ —Å–µ–∫—É–Ω–¥.

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∏–ª—É –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞.

## Slash-–∫–æ–º–∞–Ω–¥—ã

–ë–æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤ –≥–∏–ª—å–¥–∏–∏, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

- `/systems add <–∏–º—è>` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É.
- `/systems remove <–∏–º—è>` ‚Äî —É–¥–∞–ª–∏—Ç—å —Å–∏—Å—Ç–µ–º—É.
- `/systems list` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏.
- `/systems comment <–∏–º—è> <—Ç–µ–∫—Å—Ç>` –∏ `/systems comment_clear <–∏–º—è>` ‚Äî —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏.
- `/systems_move <–∏–º—è> <–ø–æ–∑–∏—Ü–∏—è>` ‚Äî –ø–µ—Ä–µ—Å—Ç–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≤ —Å–ø–∏—Å–∫–µ.
- `/systems_comment <–∏–º—è> <—Ç–µ–∫—Å—Ç>` ‚Äî —è—Ä–ª—ã–∫ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è.
- `/call <—Å–∏—Å—Ç–µ–º–∞>` ‚Äî –∑–∞–ø–∏—Å–∞—Ç—å –≤—ã–∑–æ–≤ (—É—á–∏—Ç—ã–≤–∞–µ—Ç –ª–∏–º–∏—Ç—ã –∏ –∫—É–ª–¥–∞—É–Ω).
- `/undo <—Å–∏—Å—Ç–µ–º–∞>` ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–∑–æ–≤.
- `/status [—Å–∏—Å—Ç–µ–º–∞]` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–ª–∏ —Å–≤–æ–¥–∫—É –ø–æ –≤—Å–µ–º.
- `/stats` ‚Äî –≤—ã–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—ã–∑–æ–≤–æ–≤ –∑–∞ —Ç–µ–∫—É—â—É—é –∏ –ø—Ä–æ—à–ª—É—é –Ω–µ–¥–µ–ª–∏.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –±–æ—Ç —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã –≤ —Ä–∞–±–æ—á–µ–º –∫–∞–Ω–∞–ª–µ, –æ—Ç–º–µ—á–∞—è –≤—ã–∑–æ–≤—ã –∏ –æ–±–Ω–æ–≤–ª—è—è –∂–∏–≤–æ–π –ø–æ—Å—Ç.

## –°–∞–º–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏–∑ GitHub –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º `self-update`:
```bash
python NIGIL_status.py --self-update
```
–°–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (—Ñ–æ—Ä–º–∞—Ç `owner/repo` –∏–ª–∏ URL) –∏ –∑–∞–≥—Ä—É–∑–∏—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –µ–¥–∏–Ω—ã–π –º–æ–¥—É–ª—å `NIGIL_status.py` —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –±–æ—Ç–∞.
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite + aiosqlite).
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ [Discord Developer Portal](https://discord.com/developers/applications), –≤–∫–ª—é—á–∏—Ç–µ `SERVER MEMBERS INTENT` –∏ `MESSAGE CONTENT INTENT`, –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç.

–ë—É–¥—É—Ç –ø–æ–ª–µ–∑–Ω—ã –ª—é–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∏ –æ—Ç—á—ë—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issue –∏–ª–∏ –ø—É–ª-—Ä–µ–∫–≤–µ—Å—Ç.
